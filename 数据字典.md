# 药品存销管理系统数据字典报告

## A同学：药品与供应商管理子系统数据字典

### 1. 数据项定义

| 数据项编号 | 数据项名称      | 数据类型 | 长度 | 取值范围      | 说明                        |
| ---------- | --------------- | -------- | ---- | ------------- | --------------------------- |
| A001       | medicine_id     | INT      | -    | 自动生成      | 药品唯一标识，主键          |
| A002       | medicine_name   | VARCHAR  | 100  | 非空          | 药品名称                    |
| A003       | specification   | VARCHAR  | 50   | -             | 药品规格                    |
| A004       | unit            | VARCHAR  | 20   | -             | 计量单位（盒、瓶、支等）    |
| A005       | manufacturer    | VARCHAR  | 100  | -             | 生产厂家                    |
| A006       | category        | VARCHAR  | 50   | -             | 药品类别（处方药/非处方药） |
| A007       | price           | DECIMAL  | 10,2 | >=0           | 药品单价                    |
| A008       | medicine_status | VARCHAR  | 10   | 正常/停用     | 药品状态                    |
| B001       | supplier_id     | INT      | -    | 自动生成      | 供应商唯一标识，主键        |
| B002       | supplier_name   | VARCHAR  | 100  | 非空          | 供应商名称                  |
| B003       | contact         | VARCHAR  | 50   | -             | 联系人姓名                  |
| B004       | phone           | VARCHAR  | 20   | -             | 联系电话                    |
| B005       | address         | VARCHAR  | 200  | -             | 供应商地址                  |
| B006       | supplier_status | VARCHAR  | 10   | 合作中/已终止 | 合作状态                    |

### 2. 数据结构定义

#### 药品表 (D1)
| 字段名        | 别名     | 类型    | 长度 | 主键 | 外键 | 可空 | 默认值         | 说明          |
| ------------- | -------- | ------- | ---- | ---- | ---- | ---- | -------------- | ------------- |
| medicine_id   | 药品ID   | INT     | -    | 是   | -    | 否   | AUTO_INCREMENT | 主键          |
| medicine_name | 药品名称 | VARCHAR | 100  | -    | -    | 否   | -              | 药品全称      |
| specification | 规格     | VARCHAR | 50   | -    | -    | 是   | -              | 如：10mg×20片 |
| unit          | 单位     | VARCHAR | 20   | -    | -    | 是   | -              | 如：盒、瓶    |
| manufacturer  | 生产厂家 | VARCHAR | 100  | -    | -    | 是   | -              | 制造商名称    |
| category      | 类别     | VARCHAR | 50   | -    | -    | 是   | -              | 药品分类      |
| price         | 单价     | DECIMAL | 10,2 | -    | -    | 是   | 0.00           | 当前价格      |
| status        | 状态     | VARCHAR | 10   | -    | -    | 是   | '正常'         | 药品状态      |

#### 供应商表 (D2)
| 字段名        | 别名       | 类型    | 长度 | 主键 | 外键 | 可空 | 默认值         | 说明       |
| ------------- | ---------- | ------- | ---- | ---- | ---- | ---- | -------------- | ---------- |
| supplier_id   | 供应商ID   | INT     | -    | 是   | -    | 否   | AUTO_INCREMENT | 主键       |
| supplier_name | 供应商名称 | VARCHAR | 100  | -    | -    | 否   | -              | 供应商全称 |
| contact       | 联系人     | VARCHAR | 50   | -    | -    | 是   | -              | 对接人姓名 |
| phone         | 电话       | VARCHAR | 20   | -    | -    | 是   | -              | 联系方式   |
| address       | 地址       | VARCHAR | 200  | -    | -    | 是   | -              | 供应商地址 |
| status        | 状态       | VARCHAR | 10   | -    | -    | 是   | '合作中'       | 合作状态   |

### 3. 数据流定义

| 数据流编号 | 数据流名称       | 来源           | 去向           | 组成                                      | 流量 | 说明               |
| ---------- | ---------------- | -------------- | -------------- | ----------------------------------------- | ---- | ------------------ |
| DF-A001    | 药品信息输入流   | 管理员         | 药品管理模块   | 药品ID+名称+规格+单位+厂家+类别+价格+状态 | 中   | 管理员录入药品信息 |
| DF-A002    | 药品信息查询流   | 药品管理模块   | 管理员         | 药品表全部字段                            | 高   | 查询药品信息       |
| DF-A003    | 药品信息更新流   | 管理员         | 药品管理模块   | 药品ID+待更新字段                         | 中   | 更新药品信息       |
| DF-A004    | 供应商信息输入流 | 管理员         | 供应商管理模块 | 供应商ID+名称+联系人+电话+地址+状态       | 低   | 录入供应商信息     |
| DF-A005    | 供应商信息查询流 | 供应商管理模块 | 管理员         | 供应商表全部字段                          | 中   | 查询供应商信息     |

### 4. 数据存储定义

| 数据存储编号 | 数据存储名称 | 组成                                                         | 组织方式              | 存取频率           | 存取方式             |
| ------------ | ------------ | ------------------------------------------------------------ | --------------------- | ------------------ | -------------------- |
| DS-A001      | 药品表(D1)   | medicine_id, medicine_name, specification, unit, manufacturer, category, price, status | 按medicine_id升序排列 | 高频读取，中频更新 | 随机存取，按主键查询 |
| DS-A002      | 供应商表(D2) | supplier_id, supplier_name, contact, phone, address, status  | 按supplier_id升序排列 | 中频读取，低频更新 | 随机存取，按主键查询 |

### 5. 处理逻辑定义

| 处理逻辑编号 | 处理逻辑名称   | 输入       | 处理过程                                                     | 输出         | 说明                   |
| ------------ | -------------- | ---------- | ------------------------------------------------------------ | ------------ | ---------------------- |
| P1.1         | 药品信息管理   | 药品数据   | 1. 验证数据完整性<br>2. 检查药品名称唯一性<br>3. 执行增删改查操作<br>4. 返回操作结果 | 操作结果信息 | 对药品表进行CRUD操作   |
| P1.2         | 供应商信息管理 | 供应商数据 | 1. 验证数据完整性<br>2. 检查供应商名称唯一性<br>3. 执行增删改查操作<br>4. 返回操作结果 | 操作结果信息 | 对供应商表进行CRUD操作 |

### 6. 外部实体定义

| 外部实体编号 | 外部实体名称 | 输入数据流                             | 输出数据流                               | 说明                             |
| ------------ | ------------ | -------------------------------------- | ---------------------------------------- | -------------------------------- |
| S1           | 管理员       | 药品信息查询结果<br>供应商信息查询结果 | 药品信息输入/更新<br>供应商信息输入/更新 | 系统管理员角色，负责基础数据维护 |

---

## B同学：采购与入库管理子系统数据字典

### 1. 数据项定义

| 数据项编号 | 数据项名称          | 数据类型 | 长度 | 取值范围             | 说明                 |
| ---------- | ------------------- | -------- | ---- | -------------------- | -------------------- |
| C001       | purchase_id         | INT      | -    | 自动生成             | 采购单唯一标识，主键 |
| C002       | supplier_id         | INT      | -    | 来自供应商表         | 供应商ID，外键       |
| C003       | purchase_date       | DATE     | -    | 当前及历史日期       | 采购日期             |
| C004       | total_amount        | DECIMAL  | 12,2 | >=0                  | 采购单总金额         |
| C005       | purchase_status     | VARCHAR  | 20   | 待入库/已完成/已取消 | 采购单状态           |
| C006       | create_time         | DATETIME | -    | 系统时间             | 创建时间             |
| D001       | purchase_detail_id  | INT      | -    | 自动生成             | 采购明细ID，主键     |
| D002       | quantity            | INT      | -    | >0                   | 采购数量             |
| D003       | purchase_unit_price | DECIMAL  | 10,2 | >=0                  | 采购单价             |
| D004       | detail_amount       | DECIMAL  | 10,2 | >=0                  | 明细金额             |
| D005       | remark              | VARCHAR  | 200  | -                    | 备注信息             |

### 2. 数据结构定义

#### 采购单表 (D4)
| 字段名        | 别名     | 类型     | 长度 | 主键 | 外键           | 可空 | 默认值            | 说明         |
| ------------- | -------- | -------- | ---- | ---- | -------------- | ---- | ----------------- | ------------ |
| purchase_id   | 采购单ID | INT      | -    | 是   | -              | 否   | AUTO_INCREMENT    | 主键         |
| supplier_id   | 供应商ID | INT      | -    | -    | D2.supplier_id | 否   | -                 | 关联供应商   |
| purchase_date | 采购日期 | DATE     | -    | -    | -              | 否   | CURDATE()         | 采购发生日期 |
| total_amount  | 总金额   | DECIMAL  | 12,2 | -    | -              | 是   | 0.00              | 自动计算     |
| status        | 状态     | VARCHAR  | 20   | -    | -              | 是   | '待入库'          | 采购单状态   |
| create_time   | 创建时间 | DATETIME | -    | -    | -              | 是   | CURRENT_TIMESTAMP | 记录创建时间 |

#### 采购单明细表 (D5)
| 字段名             | 别名       | 类型    | 长度 | 主键 | 外键           | 可空 | 默认值         | 说明       |
| ------------------ | ---------- | ------- | ---- | ---- | -------------- | ---- | -------------- | ---------- |
| purchase_detail_id | 采购明细ID | INT     | -    | 是   | -              | 否   | AUTO_INCREMENT | 主键       |
| purchase_id        | 采购单ID   | INT     | -    | -    | D4.purchase_id | 否   | -              | 关联采购单 |
| medicine_id        | 药品ID     | INT     | -    | -    | D1.medicine_id | 否   | -              | 关联药品   |
| quantity           | 数量       | INT     | -    | -    | -              | 否   | -              | 采购数量   |
| unit_price         | 采购单价   | DECIMAL | 10,2 | -    | -              | 否   | -              | 采购时单价 |
| amount             | 金额       | DECIMAL | 10,2 | -    | -              | 是   | -              | 自动计算   |
| remark             | 备注       | VARCHAR | 200  | -    | -              | 是   | -              | 其他说明   |

### 3. 数据流定义

| 数据流编号 | 数据流名称     | 来源           | 去向           | 组成                      | 流量 | 说明             |
| ---------- | -------------- | -------------- | -------------- | ------------------------- | ---- | ---------------- |
| DF-B001    | 库存查询流     | 采购员         | 库存查询模块   | 药品ID或名称              | 高   | 查询当前库存量   |
| DF-B002    | 采购请求流     | 采购员         | 采购单生成模块 | 供应商ID+药品ID+数量+单价 | 中   | 发起采购请求     |
| DF-B003    | 采购单生成流   | 采购单生成模块 | 采购单表       | 采购单所有字段            | 中   | 生成采购单记录   |
| DF-B004    | 采购明细生成流 | 采购单生成模块 | 采购明细表     | 采购明细所有字段          | 中   | 生成采购明细记录 |
| DF-B005    | 供应商查询流   | 采购员         | 供应商查询模块 | 供应商ID或名称            | 中   | 查询供应商信息   |

### 4. 数据存储定义

| 数据存储编号 | 数据存储名称     | 组成                                                         | 组织方式              | 存取频率 | 存取方式                 |
| ------------ | ---------------- | ------------------------------------------------------------ | --------------------- | -------- | ------------------------ |
| DS-B001      | 采购单表(D4)     | purchase_id, supplier_id, purchase_date, total_amount, status, create_time | 按purchase_id降序排列 | 中频读写 | 随机存取，按日期范围查询 |
| DS-B002      | 采购单明细表(D5) | purchase_detail_id, purchase_id, medicine_id, quantity, unit_price, amount, remark | 按purchase_id分组存储 | 中频读写 | 顺序存取，按采购单查询   |
| DS-B003      | 库存表(D3)       | stock_id, medicine_id, current_quantity, min_quantity, max_quantity, location, update_time, status | 按medicine_id索引     | 高频读取 | 随机存取，按药品查询     |
| DS-B004      | 供应商表(D2)     | supplier_id, supplier_name, contact, phone, address, status  | 按supplier_id升序排列 | 中频读取 | 随机存取，按主键查询     |
| DS-B005      | 药品表(D1)       | medicine_id, medicine_name, specification, unit, manufacturer, category, price, status | 按medicine_id升序排列 | 高频读取 | 随机存取，按主键查询     |

### 5. 处理逻辑定义

| 处理逻辑编号 | 处理逻辑名称 | 输入         | 处理过程                                                     | 输出             | 说明               |
| ------------ | ------------ | ------------ | ------------------------------------------------------------ | ---------------- | ------------------ |
| P2.1         | 库存查询     | 药品查询条件 | 1. 连接药品表和库存表<br>2. 根据条件查询库存信息<br>3. 返回查询结果 | 库存信息列表     | 查看药品当前库存   |
| P2.2         | 采购请求发起 | 采购需求信息 | 1. 验证药品是否存在<br>2. 验证供应商是否有效<br>3. 检查采购数量合理性<br>4. 生成采购请求数据 | 采购请求数据     | 创建采购请求       |
| P2.3         | 采购单生成   | 采购请求数据 | 1. 计算采购单总金额<br>2. 生成采购单主记录<br>3. 生成采购明细记录<br>4. 更新采购单总金额 | 采购单和明细记录 | 生成完整的采购单据 |

### 6. 外部实体定义

| 外部实体编号 | 外部实体名称 | 输入数据流                     | 输出数据流               | 说明             |
| ------------ | ------------ | ------------------------------ | ------------------------ | ---------------- |
| S2           | 采购员       | 库存查询结果<br>供应商查询结果 | 库存查询请求<br>采购请求 | 负责药品采购工作 |
| S3           | 库管员       | -                              | -                        | 负责后续入库操作 |

---

## C同学：库存与盘点管理子系统数据字典

### 1. 数据项定义

| 数据项编号 | 数据项名称       | 数据类型 | 长度 | 取值范围       | 说明                 |
| ---------- | ---------------- | -------- | ---- | -------------- | -------------------- |
| E001       | stock_id         | INT      | -    | 自动生成       | 库存记录ID，主键     |
| E002       | medicine_id      | INT      | -    | 来自药品表     | 药品ID，外键         |
| E003       | current_quantity | INT      | -    | >=0            | 当前库存数量         |
| E004       | min_quantity     | INT      | -    | >=0            | 最低库存预警线       |
| E005       | max_quantity     | INT      | -    | >=min_quantity | 最高库存限制         |
| E006       | location         | VARCHAR  | 50   | -              | 存放位置（如A区1架） |
| E007       | update_time      | DATETIME | -    | 系统时间       | 最后更新时间         |
| E008       | stock_status     | VARCHAR  | 10   | 正常/缺货/积压 | 库存状态             |

### 2. 数据结构定义

#### 库存表 (D3)
| 字段名           | 别名     | 类型     | 长度 | 主键 | 外键           | 可空 | 默认值            | 说明             |
| ---------------- | -------- | -------- | ---- | ---- | -------------- | ---- | ----------------- | ---------------- |
| stock_id         | 库存ID   | INT      | -    | 是   | -              | 否   | AUTO_INCREMENT    | 主键             |
| medicine_id      | 药品ID   | INT      | -    | -    | D1.medicine_id | 否   | -                 | 关联药品         |
| current_quantity | 当前库存 | INT      | -    | -    | -              | 否   | 0                 | 实时库存数量     |
| min_quantity     | 最低库存 | INT      | -    | -    | -              | 是   | 10                | 库存预警下限     |
| max_quantity     | 最高库存 | INT      | -    | -    | -              | 是   | 1000              | 库存上限         |
| location         | 存放位置 | VARCHAR  | 50   | -    | -              | 是   | -                 | 仓库中的具体位置 |
| update_time      | 更新时间 | DATETIME | -    | -    | -              | 是   | CURRENT_TIMESTAMP | 最后更新时间     |
| status           | 状态     | VARCHAR  | 10   | -    | -              | 是   | '正常'            | 库存状态         |

### 3. 数据流定义

| 数据流编号 | 数据流名称 | 来源         | 去向         | 组成                 | 流量 | 说明               |
| ---------- | ---------- | ------------ | ------------ | -------------------- | ---- | ------------------ |
| DF-C001    | 入库请求流 | 采购单表     | 入库处理模块 | 采购单ID+药品ID+数量 | 中   | 待入库的采购单信息 |
| DF-C002    | 出库请求流 | 销售单表     | 出库处理模块 | 销售单ID+药品ID+数量 | 高   | 待出库的销售单信息 |
| DF-C003    | 入库确认流 | 入库处理模块 | 库存表       | 药品ID+增加数量      | 中   | 确认入库，增加库存 |
| DF-C004    | 出库确认流 | 出库处理模块 | 库存表       | 药品ID+减少数量      | 高   | 确认出库，减少库存 |
| DF-C005    | 库存盘点流 | 库管员       | 盘点处理模块 | 药品ID+实际数量      | 低   | 手工盘点数据       |
| DF-C006    | 库存调整流 | 盘点处理模块 | 库存表       | 药品ID+调整后数量    | 低   | 调整库存到实际数量 |

### 4. 数据存储定义

| 数据存储编号 | 数据存储名称     | 组成                                                         | 组织方式           | 存取频率 | 存取方式               |
| ------------ | ---------------- | ------------------------------------------------------------ | ------------------ | -------- | ---------------------- |
| DS-C001      | 库存表(D3)       | stock_id, medicine_id, current_quantity, min_quantity, max_quantity, location, update_time, status | 按location分区存储 | 高频读写 | 随机存取，按药品查询   |
| DS-C002      | 采购单表(D4)     | purchase_id, supplier_id, purchase_date, total_amount, status, create_time | 按status和日期过滤 | 中频读取 | 顺序存取，查询待入库单 |
| DS-C003      | 采购单明细表(D5) | purchase_detail_id, purchase_id, medicine_id, quantity, unit_price, amount, remark | 按purchase_id关联  | 中频读取 | 随机存取，按采购单查询 |
| DS-C004      | 销售单表(D6)     | sales_id, customer_name, sales_date, total_amount, status, create_time | 按status和日期过滤 | 高频读取 | 顺序存取，查询待出库单 |
| DS-C005      | 销售单明细表(D7) | sales_detail_id, sales_id, medicine_id, quantity, unit_price, amount, remark | 按sales_id关联     | 高频读取 | 随机存取，按销售单查询 |
| DS-C006      | 药品表(D1)       | medicine_id, medicine_name, specification, unit, manufacturer, category, price, status | 按medicine_id索引  | 高频读取 | 随机存取，查询药品信息 |

### 5. 处理逻辑定义

| 处理逻辑编号 | 处理逻辑名称 | 输入         | 处理过程                                                     | 输出             | 说明         |
| ------------ | ------------ | ------------ | ------------------------------------------------------------ | ---------------- | ------------ |
| P3.1         | 入库审核处理 | 采购单信息   | 1. 查询待入库采购单<br>2. 核对药品和数量<br>3. 确认入库<br>4. 更新库存数量 | 入库确认结果     | 处理采购入库 |
| P3.2         | 入库库存更新 | 入库确认信息 | 1. 获取药品ID和入库数量<br>2. 查询当前库存<br>3. 计算新库存量<br>4. 更新库存记录 | 更新后的库存信息 | 增加库存数量 |
| P3.3         | 出库审核处理 | 销售单信息   | 1. 查询待出库销售单<br>2. 检查库存是否充足<br>3. 确认出库<br>4. 更新库存数量 | 出库确认结果     | 处理销售出库 |
| P3.4         | 出库库存更新 | 出库确认信息 | 1. 获取药品ID和出库数量<br>2. 查询当前库存<br>3. 计算新库存量<br>4. 更新库存记录 | 更新后的库存信息 | 减少库存数量 |
| P3.5         | 库存盘点处理 | 盘点数据     | 1. 获取实际盘点数量<br>2. 比对系统库存<br>3. 计算差异<br>4. 生成调整记录 | 盘点差异报告     | 定期库存盘点 |
| P3.6         | 库存预警检查 | 库存数据     | 1. 检查当前库存<br>2. 对比最低库存线<br>3. 生成预警信息      | 库存预警列表     | 库存不足预警 |

### 6. 外部实体定义

| 外部实体编号 | 外部实体名称 | 输入数据流                       | 输出数据流                       | 说明                     |
| ------------ | ------------ | -------------------------------- | -------------------------------- | ------------------------ |
| S3           | 库管员       | 入库请求<br>出库请求<br>盘点数据 | 入库确认<br>出库确认<br>盘点结果 | 负责库存管理工作         |
| S2           | 采购员       | -                                | -                                | 生成采购单，触发入库请求 |
| S4           | 销售员       | -                                | -                                | 生成销售单，触发出库请求 |

---

## D同学：销售与出库管理子系统数据字典

### 1. 数据项定义

| 数据项编号 | 数据项名称          | 数据类型 | 长度 | 取值范围             | 说明                 |
| ---------- | ------------------- | -------- | ---- | -------------------- | -------------------- |
| F001       | sales_id            | INT      | -    | 自动生成             | 销售单唯一标识，主键 |
| F002       | customer_name       | VARCHAR  | 100  | -                    | 客户名称             |
| F003       | sales_date          | DATE     | -    | 当前及历史日期       | 销售日期             |
| F004       | sales_total_amount  | DECIMAL  | 12,2 | >=0                  | 销售单总金额         |
| F005       | sales_status        | VARCHAR  | 20   | 待出库/已完成/已退货 | 销售单状态           |
| F006       | sales_create_time   | DATETIME | -    | 系统时间             | 创建时间             |
| G001       | sales_detail_id     | INT      | -    | 自动生成             | 销售明细ID，主键     |
| G002       | sales_quantity      | INT      | -    | >0                   | 销售数量             |
| G003       | sales_unit_price    | DECIMAL  | 10,2 | >=0                  | 销售单价             |
| G004       | sales_detail_amount | DECIMAL  | 10,2 | >=0                  | 明细金额             |
| G005       | sales_remark        | VARCHAR  | 200  | -                    | 备注信息             |

### 2. 数据结构定义

#### 销售单表 (D6)
| 字段名        | 别名     | 类型     | 长度 | 主键 | 外键 | 可空 | 默认值            | 说明         |
| ------------- | -------- | -------- | ---- | ---- | ---- | ---- | ----------------- | ------------ |
| sales_id      | 销售单ID | INT      | -    | 是   | -    | 否   | AUTO_INCREMENT    | 主键         |
| customer_name | 客户名称 | VARCHAR  | 100  | -    | -    | 是   | -                 | 购买客户名称 |
| sales_date    | 销售日期 | DATE     | -    | -    | -    | 否   | CURDATE()         | 销售发生日期 |
| total_amount  | 总金额   | DECIMAL  | 12,2 | -    | -    | 是   | 0.00              | 自动计算     |
| status        | 状态     | VARCHAR  | 20   | -    | -    | 是   | '待出库'          | 销售单状态   |
| create_time   | 创建时间 | DATETIME | -    | -    | -    | 是   | CURRENT_TIMESTAMP | 记录创建时间 |

#### 销售单明细表 (D7)
| 字段名          | 别名       | 类型    | 长度 | 主键 | 外键           | 可空 | 默认值         | 说明       |
| --------------- | ---------- | ------- | ---- | ---- | -------------- | ---- | -------------- | ---------- |
| sales_detail_id | 销售明细ID | INT     | -    | 是   | -              | 否   | AUTO_INCREMENT | 主键       |
| sales_id        | 销售单ID   | INT     | -    | -    | D6.sales_id    | 否   | -              | 关联销售单 |
| medicine_id     | 药品ID     | INT     | -    | -    | D1.medicine_id | 否   | -              | 关联药品   |
| quantity        | 数量       | INT     | -    | -    | -              | 否   | -              | 销售数量   |
| unit_price      | 销售单价   | DECIMAL | 10,2 | -    | -              | 否   | -              | 销售时单价 |
| amount          | 金额       | DECIMAL | 10,2 | -    | -              | 是   | -              | 自动计算   |
| remark          | 备注       | VARCHAR | 200  | -    | -              | 是   | -              | 其他说明   |

### 3. 数据流定义

| 数据流编号 | 数据流名称     | 来源           | 去向           | 组成                 | 流量 | 说明               |
| ---------- | -------------- | -------------- | -------------- | -------------------- | ---- | ------------------ |
| DF-D001    | 库存查询流     | 销售员         | 库存查询模块   | 药品ID或名称         | 高   | 查询可售库存       |
| DF-D002    | 销售请求流     | 销售员         | 销售单生成模块 | 客户名称+药品ID+数量 | 高   | 发起销售请求       |
| DF-D003    | 销售单生成流   | 销售单生成模块 | 销售单表       | 销售单所有字段       | 高   | 生成销售单记录     |
| DF-D004    | 销售明细生成流 | 销售单生成模块 | 销售明细表     | 销售明细所有字段     | 高   | 生成销售明细记录   |
| DF-D005    | 出库状态查询流 | 销售员         | 出库状态模块   | 销售单ID             | 中   | 查询销售单出库状态 |

### 4. 数据存储定义

| 数据存储编号 | 数据存储名称     | 组成                                                         | 组织方式              | 存取频率 | 存取方式               |
| ------------ | ---------------- | ------------------------------------------------------------ | --------------------- | -------- | ---------------------- |
| DS-D001      | 销售单表(D6)     | sales_id, customer_name, sales_date, total_amount, status, create_time | 按sales_id降序排列    | 高频读写 | 随机存取，按日期查询   |
| DS-D002      | 销售单明细表(D7) | sales_detail_id, sales_id, medicine_id, quantity, unit_price, amount, remark | 按sales_id分组存储    | 高频读写 | 顺序存取，按销售单查询 |
| DS-D003      | 库存表(D3)       | stock_id, medicine_id, current_quantity, min_quantity, max_quantity, location, update_time, status | 按medicine_id索引     | 高频读取 | 随机存取，按药品查询   |
| DS-D004      | 药品表(D1)       | medicine_id, medicine_name, specification, unit, manufacturer, category, price, status | 按medicine_id升序排列 | 高频读取 | 随机存取，按主键查询   |

### 5. 处理逻辑定义

| 处理逻辑编号 | 处理逻辑名称 | 输入         | 处理过程                                                     | 输出             | 说明               |
| ------------ | ------------ | ------------ | ------------------------------------------------------------ | ---------------- | ------------------ |
| P4.1         | 可售库存查询 | 药品查询条件 | 1. 连接药品表和库存表<br>2. 查询药品信息和库存量<br>3. 过滤掉停用药品<br>4. 返回可售药品列表 | 可售药品信息     | 查看可销售的药品   |
| P4.2         | 销售请求发起 | 销售需求信息 | 1. 验证药品是否可售<br>2. 检查库存是否充足<br>3. 验证销售数量合理性<br>4. 生成销售请求数据 | 销售请求数据     | 创建销售请求       |
| P4.3         | 销售单生成   | 销售请求数据 | 1. 获取药品销售单价<br>2. 计算销售单总金额<br>3. 生成销售单主记录<br>4. 生成销售明细记录<br>5. 更新销售单总金额 | 销售单和明细记录 | 生成完整的销售单据 |

### 6. 外部实体定义

| 外部实体编号 | 外部实体名称 | 输入数据流                       | 输出数据流               | 说明             |
| ------------ | ------------ | -------------------------------- | ------------------------ | ---------------- |
| S4           | 销售员       | 库存查询结果<br>出库状态查询结果 | 库存查询请求<br>销售请求 | 负责药品销售工作 |
| S3           | 库管员       | -                                | -                        | 负责后续出库操作 |

---

## 总结说明

以上数据字典严格按照之前确定的系统设计和分工编写，没有添加新功能。每个同学的数据字典都聚焦于自己的子系统：

1. **A同学**：专注于药品表和供应商表的管理
2. **B同学**：专注于采购流程，涉及采购单、采购明细，需要查询库存和供应商信息
3. **C同学**：专注于库存管理，需要处理入库、出库、盘点，涉及所有表但主要操作库存表
4. **D同学**：专注于销售流程，涉及销售单、销售明细，需要查询库存和药品信息
